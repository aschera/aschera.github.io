<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <meta name="description" content="chat">
    <meta name="author" content="Christina Bögh">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>



    <title>Innlämning 4</title>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="paging.js"></script>

    <style>
        button {
            background-color: #813772;
            color: white;
            border-bottom-color: black;
            border: 1px;
            border-radius: 4px;
            padding: 0.5em 0.5em;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 1em;
            margin: 2px 1px;
        }

        ;
        td {
            background-color: #062F4F;
            margin: 12px 12px 12px 12px;
            padding: 12px 12px 12px 12px;
        }

        #items {
            border-radius: 4px;
        }

        table.items {
            border-collapse: separate;
            border-spacing: 10px;
            *border-collapse: expression('separate', cellSpacing='10px');
        }

        p {
            color: white;
        }

        .inputs {
            color: black;
            width:5em;
        }


        table {
            border-collapse: separate;
            background: #fff;
            @include border-radius(5px);
            margin: 50px auto;
            @include box-shadow(0px 0px 5px rgba(0, 0, 0, 0.3));
        }


        tbody tr td {
            font-family: 'Open Sans', sans-serif;
            font-weight: 400;
            color: #5f6062;
            font-size: 13px;
            padding: 20px 20px 20px 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        tbody tr:nth-child(2n) {
            background: #f0f3f5;
        }

        tbody tr:last-child td {
            border-bottom: none;
            &:first-child {
                @include border-bottom-left-radius(5px);
            }
            &:last-child {
                @include border-bottom-right-radius(5px);
            }
        }

        tbody:hover>tr td {
            @include opacity(0.5);
        }

        tbody:hover>tr:hover td {
            @include text-shadow(none);
            color: #2d2d2d;
            @include opacity(1.0);
        }
        /* background image */
/*
        html {
            background: url(bg.png) no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }

        body {
            background-color: transparent;
        }*/
        
        .btn-info {
    color: #fff;
    background-color: #59A0D8;
    border-color: #59A0D8;
    padding: 0;
    margin: 0;
    font-size: 1.2em;
    font-weight: 100;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
            height: 3em;
            width: 5em;
}
        
                .btn-info1 {
    color: #fff;
    background-color: #59A0D8;
    border-color: #59A0D8;
    padding: 0;
    margin: 0;
    font-size: 1.2em;
    font-weight: 100;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
            height: 2em;
            width: 6em;
}
        #nextItems{display: none;}
    </style>



</head>

<body class="center" style="background-color:#59A0D8;">

    <div class="container center" style="min-width:30em;">
        <div class="row" style="border-radius:4px; padding:0.5em; margin:0.5em; background-color:white;">

            <div id="banner" class="col-md-12 col-md-12 col-sm-12 col-xs-12">
            <img src="civilwaruniformsnorth.jpg">
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
        <div class="row" style="padding:0.5em; margin:0.5em; background-color:#062F4F; border-radius: 4px; min-width:30em;">

            <div class="col-md-6 col-md-6 col-sm-6 col-xs-6" style="min-width:30em;">

                <label for="inputs" style="background-color:#062F4F; width:400px;  margin:0.6em; padding:0.6em;">

 		    
		    <button type="button" value="Add" name="Add" class="btn btn-info" data-toggle="collapse" data-target="#demo">Add
		    </label>
                </button>

                <div id="demo" class="collapse" style="margin:0.6em; padding:0.6em; background-color:#062F4F; width:350px;">
                    <input class="inputs" id="inputName" type="text" placeholder="Name" />
                    <input class="inputs" id="inputType" type="text" placeholder="Type" />
                    <input class="inputs" id="inputCount" type="text" placeholder="Count" />
                    <input class="inputs" id="inputPrice" type="text" placeholder="Price" />
                    <button class="inputs btn-info1" id="addButton" style="margin-top:5px;">Add</button>
                </div>

            </div>
            <!-- end col -->
            <div class="col-md-6 col-md-6 col-sm-6 col-xs-6" style="min-width:500px;">

                <label for="inputs" style="background-color:#062F4F; width:400px; margin:0.6em; padding:0.6em;"> 
		    <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#demo1" value="sort"> Sort
		    </label>
                </button>

                <div id="demo1" class="collapse" style="margin:0.6em; padding:0.6em; background-color:#062F4F; min-width:400px;">
                    <button class="inputs btn-info1" id="sortname">by <strong>name</strong></button>
                    <button class="inputs btn-info1" id="sorttype">by <strong>type</strong></button>
                    <button class="inputs btn-info1" id="sortcount">by <strong>amount</strong></button>
                    <button class="inputs btn-info1" id="sortprice">by <strong>price</strong></button>
                    
                </div>
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->

        <div class="row" style="padding:0.5em; margin:0.5em; border-radius: 4px; background-color:#062F4F; min-width:30em;">

            <div class="col-md-6 col-md-6 col-sm-6 col-xs-6" style="min-width:30em;">

                <label for="howmany" style="color:white; background-color:#062F4F; width:68em; margin:0.6em; padding:0.6em; padding-left:0;"> Show first: <input class="inputs" placeholder=" 10" type='text' id='howmany'/> Show last: <input class="inputs" placeholder=" 10" type='text' id='howmanyLast' /></label>
		     
                
                    <table cellspacing=12 style="margin:0.6em; padding:0.6em; width:400px; border-radius:4px;">

                        <tr>
                            <th>Name</th>
                            <th style="text-align:center; padding:1em; width:133px;">Type</th>
                            <th style="text-align:right; padding:1em; width:44px;">Amount</th>
                            <th style="text-align:right; padding:1em; width:60px;">Price</th>
                        </tr>

                    </table>

                    <table id="items" cellspacing=12 style="width:400px; margin:0.6em; padding:0.6em; min-width:250px;">
                    </table>

                    <button onclick="nextList()" id="nextItems" class="btn-info1">Next</button>
                
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
    </div>
    <!-- end container -->




    <script>
        var lastItem = '';

        window.addEventListener('load', function() { //shit has to load

            let name = document.getElementById('inputName');
            let type = document.getElementById('inputType');
            let amount = document.getElementById('inputCount');
            let price = document.getElementById('inputPrice');
            let addButton = document.getElementById('addButton');



            addButton.addEventListener('click', function(event) { // button push add

                firebase.database().ref('items/').push({
                    name: name.value,
                    type: type.value,
                    amount: Number(amount.value),
                    price: Number(price.value)
                });
            });
            firebase.database().ref('items/').on('child_added', function(snapshot, prevChildKey) {

                let data = snapshot.val();
                addItem(data);


            });

            function addItem(data) {
                let items = document.getElementById('items');
                let tr = document.createElement('tr');
                tr.style.margin = '1em';
                tr.style.color = 'black';

                tr.innerHTML = `
			<td style="padding:1em;" >${data.name}</td> 
			<td style="padding:1em;" >${data.type}</td> 
			<td style="padding:1em;"  >${data.amount}</td>
			<td style="padding:1em;" >${data.price}</td> 
			`;
                items.appendChild(tr);
            }


            let sortName = document.getElementById('sortname');
            let sortType = document.getElementById('sorttype');
            let SortCount = document.getElementById('sortcount');
            let sortPrice = document.getElementById('sortprice');
            let howMany = document.getElementById('howmany');
            let howManyLast = document.getElementById('howmanyLast');

            function sortFunction(button, sortKey) {
                button.addEventListener('click', function(event) {
                    items.innerHTML = '';

                    firebase.database().ref('items/').orderByChild(sortKey)
                        .once('value', function(snapshot) {
                            snapshot.forEach(items => {
                                addItem(items.val());


                            })
                        });
                })
            }
            sortFunction(sortName, 'name');
            sortFunction(sortType, 'type');
            sortFunction(SortCount, 'count');
            sortFunction(sortPrice, 'price');

            howMany.addEventListener('keypress', function(event) {


                if (event.keyCode == 13) {
                    let many = Number(howmany.value);
                    items.innerHTML = '';
                    showButton('block');

                    if (isNaN(many)) {
                        console.log('no good');
                    } else {
                        firebase.database().ref('items/').limitToFirst(many)
                            .once('value', function(snapshot) {
                                snapshot.forEach(items => {
                                    addItem(items.val());

                                })
                            });
                    }

                };
            });
            
            
            howManyLast.addEventListener('keypress', function(event) {


                if (event.keyCode == 13) {
                    let many = Number(howManyLast.value);
                    items.innerHTML = '';
                    showButton('block');

                    if (isNaN(many)) {
                        console.log('no good');
                    } else {
                        firebase.database().ref('items/').limitToLast(many)
                            .once('value', function(snapshot) {
                                snapshot.forEach(items => {
                                    addItem(items.val());

                                })
                            });
                    }

                };
            });




        }); // end loader
    </script>

    <script src="https://www.gstatic.com/firebasejs/3.7.3/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyA9MPqB2yn2TZWAprYguFmg9gLCUiog31s",
            authDomain: "sortingshop.firebaseapp.com",
            databaseURL: "https://sortingshop.firebaseio.com",
            storageBucket: "sortingshop.appspot.com",
            messagingSenderId: "968890666078"
        };
        firebase.initializeApp(config);
    </script>

</body>

</html>
